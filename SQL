CREATE TABLE A_DB
(
  class_course_name VARCHAR2(100) 
, inter_review_id NUMBER
, owner_id VARCHAR2(20) 
, giver_id VARCHAR2(20) 
, item1 NUMBER 
, item2 NUMBER 
, item3 NUMBER 
, item4 NUMBER 
, item5 NUMBER 
, item6 NUMBER 
, item7 NUMBER
, item8 NUMBER
, item9 NUMBER
, item10 NUMBER
, comments VARCHAR2(400) NOT NULL
, review_date VARCHAR2(20) 
, CONSTRAINT A_DB_PK PRIMARY KEY 
   (
    inter_review_id
  , owner_id 
  , giver_id
  )
  ENABLE 
);


CREATE TABLE A_TERMS
(
  TERMS VARCHAR2(50)
, CONSTRAINT A_TERMS_PK PRIMARY KEY
  (
    TERMS
  )
  ENABLE
);

CREATE TABLE A_TERMS_WEIGHT
(
  TERMS VARCHAR2(50)
, WEIGHT NUMBER
, CONSTRAINT A_CORPUS_WEIGHT_PK PRIMARY KEY
  (
    TERMS
  )
  ENABLE
);

CREATE TABLE A_OWNER_WEIGHT
(
  OWNER_ID VARCHAR2(20)
, GIVER_ID VARCHAR2(20)
, inter_review_id NUMBER
, TERMS VARCHAR2(50)
, WEIGHT NUMBER
, CONSTRAINT A_OWNER_WEIGHT_PK PRIMARY KEY
  (
    OWNER_ID
  , GIVER_ID
  , TERMS
  , inter_review_id 
  , WEIGHT
  )
  ENABLE
);




#ERD
ALTER TABLE A_TERMS_WEIGHT ADD FOREIGN KEY(TERMS) REFERENCES A_TERMS(TERMS);
ALTER TABLE A_OWNER_WEIGHT ADD FOREIGN KEY(TERMS,WEIGHT) REFERENCES A_TERMS_WEIGHT(TERMS,WEIGHT);
ALTER TABLE A_OWNER_WEIGHT ADD FOREIGN KEY(OWNER_ID,GIVER_ID,inter_review_id) REFERENCES A_DB(OWNER_ID,GIVER_ID,inter_review_id);


INSERT INTO AUPLOAD3 VALUES('日四資三B：資料庫管理系統', 1, 'D1034242777', 'D1034242043', 2, 2, 2, 2, 2, 2, '本次成績係由任課老師補登',TO_DATE('2017/10/5','YYYY/MM/DD'));
